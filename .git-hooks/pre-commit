#!/bin/bash
# Git pre-commit hook for void-chronicles
# Automatically runs linting, tests, and security scan before allowing commits
# This ensures code quality and prevents broken/vulnerable code from being committed

set -e

echo "üîç Running pre-commit checks..."
echo ""

# Run lint, tests, and security scan using the Makefile
if make pre-commit; then
    echo ""
    echo "‚úÖ All pre-commit checks passed! Proceeding with commit..."
    exit 0
else
    echo ""
    echo "‚ùå Pre-commit checks failed!"
    echo ""
    echo "Please fix the issues above before committing."
    echo "You can run 'make pre-commit' to see the errors again."
    echo ""
    echo "To bypass this check (not recommended), use:"
    echo "  git commit --no-verify"
    echo ""
    exit 1
fi
