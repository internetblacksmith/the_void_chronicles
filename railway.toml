# Railway deployment configuration

[build]
builder = "NIXPACKS"
buildCommand = "cd ssh-reader && go mod download && go build -o void-reader . && cp -r ../book1_void_reavers_source ."

[deploy]
startCommand = "cd ssh-reader && ./void-reader"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Environment variables (can be overridden in Railway dashboard)
[variables]
SSH_HOST = "0.0.0.0"
SSH_PORT = "2222"
SSH_PASSWORD = "Amigos4Life!"
# PORT is provided by Railway automatically for HTTP domain
# Configure TCP proxy in Railway dashboard to forward to SSH_PORT (2222)

# Railway Configuration Notes:
# 1. HTTP domain uses PORT (automatically provided)
# 2. TCP proxy uses separate port (configure in dashboard)
# 3. Both can run on same service with different internal ports