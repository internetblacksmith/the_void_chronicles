# Railway deployment configuration

[build]
builder = "NIXPACKS"
buildCommand = "cd ssh-reader && go mod download && go build -o void-reader . && cp -r ../book1_void_reavers_source ."

[deploy]
startCommand = "cd ssh-reader && ./void-reader"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Environment variables (can be overridden in Railway dashboard)
[variables]
SSH_HOST = "0.0.0.0"
SSH_PORT = "8022"  # Must be different from PORT (which Railway sets to 2222)
SSH_PASSWORD = "Amigos4Life!"
# PORT is provided by Railway automatically for HTTP domain

# Railway Configuration Notes:
# 1. HTTP uses PORT (automatically provided by Railway, currently 2222)
# 2. SSH uses SSH_PORT (set to 8022 to avoid conflict)
# 3. Update Railway TCP proxy settings to forward to port 8022
# 4. External SSH access via RAILWAY_TCP_PROXY_PORT (shown in dashboard)