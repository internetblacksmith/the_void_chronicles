# Railway deployment configuration

[build]
builder = "NIXPACKS"
buildCommand = "cd ssh-reader && go mod download && go build -o void-reader . && cp -r ../book1_void_reavers_source ."

[deploy]
startCommand = "cd ssh-reader && ./void-reader"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Environment variables (can be overridden in Railway dashboard)
[variables]
SSH_HOST = "0.0.0.0"
SSH_PASSWORD = "Amigos4Life!"
# PORT is provided by Railway automatically for HTTP domain
# RAILWAY_TCP_APPLICATION_PORT is provided by Railway for TCP proxy (usually 2222)

# Railway Configuration Notes:
# 1. HTTP uses PORT (automatically provided by Railway)
# 2. SSH uses RAILWAY_TCP_APPLICATION_PORT (automatically set when TCP proxy is enabled)
# 3. External SSH access via RAILWAY_TCP_PROXY_PORT (shown in Railway dashboard)