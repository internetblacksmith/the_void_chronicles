# Railway deployment configuration

[build]
builder = "NIXPACKS"
buildCommand = "cd ssh-reader && go mod download && go build -o void-reader ."

[deploy]
startCommand = "cd ssh-reader && PORT=${PORT:-8080} ./void-reader"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Environment variables (can be overridden in Railway dashboard)
[variables]
SSH_HOST = "0.0.0.0"
# PORT is provided by Railway automatically for HTTP domain
# RAILWAY_TCP_APPLICATION_PORT is provided for TCP proxy (SSH)
SSH_PASSWORD = "Amigos4Life!"

# Railway Configuration Notes:
# 1. HTTP domain uses PORT (automatically provided)
# 2. TCP proxy uses separate port (configure in dashboard)
# 3. Both can run on same service with different internal ports